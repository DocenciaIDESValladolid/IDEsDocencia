/*! Built with http://stenciljs.com */
const{h:t}=window.App;import{a as e,b as i,c as o,d as n,e as r,f as a,g as s,h,i as l,j as c,k as u,l as d,m as f,n as g,o as p,p as m,q as _,r as y,s as v,t as I,u as C,v as E,w as S,x as b,y as x,z as w,a0 as T,a1 as F,a2 as R,a3 as D,a4 as A,a5 as L,a6 as k,a7 as O}from"./chunk-58e4c25b.js";import{c as N,d as P,e as G,f as z,g as U,h as M}from"./chunk-b2855577.js";import{a as B,b as X}from"./chunk-5851a23a.js";import{a as V}from"./chunk-f6177d6b.js";import{c as W}from"./chunk-770a6cdb.js";import"./chunk-ee323282.js";const Y={viridis:new Uint8Array([68,1,84,255,68,2,86,255,69,4,87,255,69,5,89,255,70,7,90,255,70,8,92,255,70,10,93,255,70,11,94,255,71,13,96,255,71,14,97,255,71,16,99,255,71,17,100,255,71,19,101,255,72,20,103,255,72,22,104,255,72,23,105,255,72,24,106,255,72,26,108,255,72,27,109,255,72,28,110,255,72,29,111,255,72,31,112,255,72,32,113,255,72,33,115,255,72,35,116,255,72,36,117,255,72,37,118,255,72,38,119,255,72,40,120,255,72,41,121,255,71,42,122,255,71,44,122,255,71,45,123,255,71,46,124,255,71,47,125,255,70,48,126,255,70,50,126,255,70,51,127,255,70,52,128,255,69,53,129,255,69,55,129,255,69,56,130,255,68,57,131,255,68,58,131,255,68,59,132,255,67,61,132,255,67,62,133,255,66,63,133,255,66,64,134,255,66,65,134,255,65,66,135,255,65,68,135,255,64,69,136,255,64,70,136,255,63,71,136,255,63,72,137,255,62,73,137,255,62,74,137,255,62,76,138,255,61,77,138,255,61,78,138,255,60,79,138,255,60,80,139,255,59,81,139,255,59,82,139,255,58,83,139,255,58,84,140,255,57,85,140,255,57,86,140,255,56,88,140,255,56,89,140,255,55,90,140,255,55,91,141,255,54,92,141,255,54,93,141,255,53,94,141,255,53,95,141,255,52,96,141,255,52,97,141,255,51,98,141,255,51,99,141,255,50,100,142,255,50,101,142,255,49,102,142,255,49,103,142,255,49,104,142,255,48,105,142,255,48,106,142,255,47,107,142,255,47,108,142,255,46,109,142,255,46,110,142,255,46,111,142,255,45,112,142,255,45,113,142,255,44,113,142,255,44,114,142,255,44,115,142,255,43,116,142,255,43,117,142,255,42,118,142,255,42,119,142,255,42,120,142,255,41,121,142,255,41,122,142,255,41,123,142,255,40,124,142,255,40,125,142,255,39,126,142,255,39,127,142,255,39,128,142,255,38,129,142,255,38,130,142,255,38,130,142,255,37,131,142,255,37,132,142,255,37,133,142,255,36,134,142,255,36,135,142,255,35,136,142,255,35,137,142,255,35,138,141,255,34,139,141,255,34,140,141,255,34,141,141,255,33,142,141,255,33,143,141,255,33,144,141,255,33,145,140,255,32,146,140,255,32,146,140,255,32,147,140,255,31,148,140,255,31,149,139,255,31,150,139,255,31,151,139,255,31,152,139,255,31,153,138,255,31,154,138,255,30,155,138,255,30,156,137,255,30,157,137,255,31,158,137,255,31,159,136,255,31,160,136,255,31,161,136,255,31,161,135,255,31,162,135,255,32,163,134,255,32,164,134,255,33,165,133,255,33,166,133,255,34,167,133,255,34,168,132,255,35,169,131,255,36,170,131,255,37,171,130,255,37,172,130,255,38,173,129,255,39,173,129,255,40,174,128,255,41,175,127,255,42,176,127,255,44,177,126,255,45,178,125,255,46,179,124,255,47,180,124,255,49,181,123,255,50,182,122,255,52,182,121,255,53,183,121,255,55,184,120,255,56,185,119,255,58,186,118,255,59,187,117,255,61,188,116,255,63,188,115,255,64,189,114,255,66,190,113,255,68,191,112,255,70,192,111,255,72,193,110,255,74,193,109,255,76,194,108,255,78,195,107,255,80,196,106,255,82,197,105,255,84,197,104,255,86,198,103,255,88,199,101,255,90,200,100,255,92,200,99,255,94,201,98,255,96,202,96,255,99,203,95,255,101,203,94,255,103,204,92,255,105,205,91,255,108,205,90,255,110,206,88,255,112,207,87,255,115,208,86,255,117,208,84,255,119,209,83,255,122,209,81,255,124,210,80,255,127,211,78,255,129,211,77,255,132,212,75,255,134,213,73,255,137,213,72,255,139,214,70,255,142,214,69,255,144,215,67,255,147,215,65,255,149,216,64,255,152,216,62,255,155,217,60,255,157,217,59,255,160,218,57,255,162,218,55,255,165,219,54,255,168,219,52,255,170,220,50,255,173,220,48,255,176,221,47,255,178,221,45,255,181,222,43,255,184,222,41,255,186,222,40,255,189,223,38,255,192,223,37,255,194,223,35,255,197,224,33,255,200,224,32,255,202,225,31,255,205,225,29,255,208,225,28,255,210,226,27,255,213,226,26,255,216,226,25,255,218,227,25,255,221,227,24,255,223,227,24,255,226,228,24,255,229,228,25,255,231,228,25,255,234,229,26,255,236,229,27,255,239,229,28,255,241,229,29,255,244,230,30,255,246,230,32,255,248,230,33,255,251,231,35,255,253,231,37,255]),inferno:new Uint8Array([0,0,4,255,1,0,5,255,1,1,6,255,1,1,8,255,2,1,10,255,2,2,12,255,2,2,14,255,3,2,16,255,4,3,18,255,4,3,20,255,5,4,23,255,6,4,25,255,7,5,27,255,8,5,29,255,9,6,31,255,10,7,34,255,11,7,36,255,12,8,38,255,13,8,41,255,14,9,43,255,16,9,45,255,17,10,48,255,18,10,50,255,20,11,52,255,21,11,55,255,22,11,57,255,24,12,60,255,25,12,62,255,27,12,65,255,28,12,67,255,30,12,69,255,31,12,72,255,33,12,74,255,35,12,76,255,36,12,79,255,38,12,81,255,40,11,83,255,41,11,85,255,43,11,87,255,45,11,89,255,47,10,91,255,49,10,92,255,50,10,94,255,52,10,95,255,54,9,97,255,56,9,98,255,57,9,99,255,59,9,100,255,61,9,101,255,62,9,102,255,64,10,103,255,66,10,104,255,68,10,104,255,69,10,105,255,71,11,106,255,73,11,106,255,74,12,107,255,76,12,107,255,77,13,108,255,79,13,108,255,81,14,108,255,82,14,109,255,84,15,109,255,85,15,109,255,87,16,110,255,89,16,110,255,90,17,110,255,92,18,110,255,93,18,110,255,95,19,110,255,97,19,110,255,98,20,110,255,100,21,110,255,101,21,110,255,103,22,110,255,105,22,110,255,106,23,110,255,108,24,110,255,109,24,110,255,111,25,110,255,113,25,110,255,114,26,110,255,116,26,110,255,117,27,110,255,119,28,109,255,120,28,109,255,122,29,109,255,124,29,109,255,125,30,109,255,127,30,108,255,128,31,108,255,130,32,108,255,132,32,107,255,133,33,107,255,135,33,107,255,136,34,106,255,138,34,106,255,140,35,105,255,141,35,105,255,143,36,105,255,144,37,104,255,146,37,104,255,147,38,103,255,149,38,103,255,151,39,102,255,152,39,102,255,154,40,101,255,155,41,100,255,157,41,100,255,159,42,99,255,160,42,99,255,162,43,98,255,163,44,97,255,165,44,96,255,166,45,96,255,168,46,95,255,169,46,94,255,171,47,94,255,173,48,93,255,174,48,92,255,176,49,91,255,177,50,90,255,179,50,90,255,180,51,89,255,182,52,88,255,183,53,87,255,185,53,86,255,186,54,85,255,188,55,84,255,189,56,83,255,191,57,82,255,192,58,81,255,193,58,80,255,195,59,79,255,196,60,78,255,198,61,77,255,199,62,76,255,200,63,75,255,202,64,74,255,203,65,73,255,204,66,72,255,206,67,71,255,207,68,70,255,208,69,69,255,210,70,68,255,211,71,67,255,212,72,66,255,213,74,65,255,215,75,63,255,216,76,62,255,217,77,61,255,218,78,60,255,219,80,59,255,221,81,58,255,222,82,56,255,223,83,55,255,224,85,54,255,225,86,53,255,226,87,52,255,227,89,51,255,228,90,49,255,229,92,48,255,230,93,47,255,231,94,46,255,232,96,45,255,233,97,43,255,234,99,42,255,235,100,41,255,235,102,40,255,236,103,38,255,237,105,37,255,238,106,36,255,239,108,35,255,239,110,33,255,240,111,32,255,241,113,31,255,241,115,29,255,242,116,28,255,243,118,27,255,243,120,25,255,244,121,24,255,245,123,23,255,245,125,21,255,246,126,20,255,246,128,19,255,247,130,18,255,247,132,16,255,248,133,15,255,248,135,14,255,248,137,12,255,249,139,11,255,249,140,10,255,249,142,9,255,250,144,8,255,250,146,7,255,250,148,7,255,251,150,6,255,251,151,6,255,251,153,6,255,251,155,6,255,251,157,7,255,252,159,7,255,252,161,8,255,252,163,9,255,252,165,10,255,252,166,12,255,252,168,13,255,252,170,15,255,252,172,17,255,252,174,18,255,252,176,20,255,252,178,22,255,252,180,24,255,251,182,26,255,251,184,29,255,251,186,31,255,251,188,33,255,251,190,35,255,250,192,38,255,250,194,40,255,250,196,42,255,250,198,45,255,249,199,47,255,249,201,50,255,249,203,53,255,248,205,55,255,248,207,58,255,247,209,61,255,247,211,64,255,246,213,67,255,246,215,70,255,245,217,73,255,245,219,76,255,244,221,79,255,244,223,83,255,244,225,86,255,243,227,90,255,243,229,93,255,242,230,97,255,242,232,101,255,242,234,105,255,241,236,109,255,241,237,113,255,241,239,117,255,241,241,121,255,242,242,125,255,242,244,130,255,243,245,134,255,243,246,138,255,244,248,142,255,245,249,146,255,246,250,150,255,248,251,154,255,249,252,157,255,250,253,161,255,252,255,164,255]),rainbow:{colors:["#96005A","#0000C8","#0019FF","#0098FF","#2CFF96","#97FF00","#FFEA00","#FF6F00","#FF0000"],positions:[0,.125,.25,.375,.5,.625,.75,.875,1]},jet:{colors:["#000083","#003CAA","#05FFFF","#FFFF00","#FA0000","#800000"],positions:[0,.125,.375,.625,.875,1]},hsv:{colors:["#ff0000","#fdff02","#f7ff02","#00fc04","#00fc0a","#01f9ff","#0200fd","#0800fd","#ff00fb","#ff00f5","#ff0006"],positions:[0,.169,.173,.337,.341,.506,.671,.675,.839,.843,1]},hot:{colors:["#000000","#e60000","#ffd200","#ffffff"],positions:[0,.3,.6,1]},cool:{colors:["#00ffff","#ff00ff"],positions:[0,1]},spring:{colors:["#ff00ff","#ffff00"],positions:[0,1]},summer:{colors:["#008066","#ffff66"],positions:[0,1]},autumn:{colors:["#ff0000","#ffff00"],positions:[0,1]},winter:{colors:["#0000ff","#00ff80"],positions:[0,1]},bone:{colors:["#000000","#545474","#a9c8c8","#ffffff"],positions:[0,.376,.753,1]},copper:{colors:["#000000","#ffa066","#ffc77f"],positions:[0,.804,1]},greys:{colors:["#000000","#ffffff"],positions:[0,1]},yignbu:{colors:["#081d58","#253494","#225ea8","#1d91c0","#41b6c4","#7fcdbb","#c7e9b4","#edf8d9","#ffffd9"],positions:[0,.125,.25,.375,.5,.625,.75,.875,1]},greens:{colors:["#00441b","#006d2c","#238b45","#41ab5d","#74c476","#a1d99b","#c7e9c0","#e5f5e0","#f7fcf5"],positions:[0,.125,.25,.375,.5,.625,.75,.875,1]},yiorrd:{colors:["#800026","#bd0026","#e31a1c","#fc4e2a","#fd8d3c","#feb24c","#fed976","#ffeda0","#ffffcc"],positions:[0,.125,.25,.375,.5,.625,.75,.875,1]},bluered:{colors:["#0000ff","#ff0000"],positions:[0,1]},rdbu:{colors:["#050aac","#6a89f7","#bebebe","#dcaa84","#e6915a","#b20a1c"],positions:[0,.35,.5,.6,.7,1]},picnic:{colors:["#0000ff","#3399ff","#66ccff","#99ccff","#ccccff","#ffffff","#ffccff","#ff99ff","#ff66cc","#ff6666","#ff0000"],positions:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]},portland:{colors:["#0c3383","#0a88ba","#f2d338","#f28f38","#d91e1e"],positions:[0,.25,.5,.75,1]},blackbody:{colors:["#000000","#e60000","#e6d200","#ffffff","#a0c8ff"],positions:[0,.2,.4,.7,1]},earth:{colors:["#000082","#00b4b4","#28d228","#e6e632","#784614","#ffffff"],positions:[0,.1,.2,.4,.6,1]},electric:{colors:["#000000","#1e0064","#780064","#a05a00","#e6c800","#fffadc"],positions:[0,.15,.4,.6,.8,1]},magma:new Uint8Array([0,0,4,255,1,0,5,255,1,1,6,255,1,1,8,255,2,1,9,255,2,2,11,255,2,2,13,255,3,3,15,255,3,3,18,255,4,4,20,255,5,4,22,255,6,5,24,255,6,5,26,255,7,6,28,255,8,7,30,255,9,7,32,255,10,8,34,255,11,9,36,255,12,9,38,255,13,10,41,255,14,11,43,255,16,11,45,255,17,12,47,255,18,13,49,255,19,13,52,255,20,14,54,255,21,14,56,255,22,15,59,255,24,15,61,255,25,16,63,255,26,16,66,255,28,16,68,255,29,17,71,255,30,17,73,255,32,17,75,255,33,17,78,255,34,17,80,255,36,18,83,255,37,18,85,255,39,18,88,255,41,17,90,255,42,17,92,255,44,17,95,255,45,17,97,255,47,17,99,255,49,17,101,255,51,16,103,255,52,16,105,255,54,16,107,255,56,16,108,255,57,15,110,255,59,15,112,255,61,15,113,255,63,15,114,255,64,15,116,255,66,15,117,255,68,15,118,255,69,16,119,255,71,16,120,255,73,16,120,255,74,16,121,255,76,17,122,255,78,17,123,255,79,18,123,255,81,18,124,255,82,19,124,255,84,19,125,255,86,20,125,255,87,21,126,255,89,21,126,255,90,22,126,255,92,22,127,255,93,23,127,255,95,24,127,255,96,24,128,255,98,25,128,255,100,26,128,255,101,26,128,255,103,27,128,255,104,28,129,255,106,28,129,255,107,29,129,255,109,29,129,255,110,30,129,255,112,31,129,255,114,31,129,255,115,32,129,255,117,33,129,255,118,33,129,255,120,34,129,255,121,34,130,255,123,35,130,255,124,35,130,255,126,36,130,255,128,37,130,255,129,37,129,255,131,38,129,255,132,38,129,255,134,39,129,255,136,39,129,255,137,40,129,255,139,41,129,255,140,41,129,255,142,42,129,255,144,42,129,255,145,43,129,255,147,43,128,255,148,44,128,255,150,44,128,255,152,45,128,255,153,45,128,255,155,46,127,255,156,46,127,255,158,47,127,255,160,47,127,255,161,48,126,255,163,48,126,255,165,49,126,255,166,49,125,255,168,50,125,255,170,51,125,255,171,51,124,255,173,52,124,255,174,52,123,255,176,53,123,255,178,53,123,255,179,54,122,255,181,54,122,255,183,55,121,255,184,55,121,255,186,56,120,255,188,57,120,255,189,57,119,255,191,58,119,255,192,58,118,255,194,59,117,255,196,60,117,255,197,60,116,255,199,61,115,255,200,62,115,255,202,62,114,255,204,63,113,255,205,64,113,255,207,64,112,255,208,65,111,255,210,66,111,255,211,67,110,255,213,68,109,255,214,69,108,255,216,69,108,255,217,70,107,255,219,71,106,255,220,72,105,255,222,73,104,255,223,74,104,255,224,76,103,255,226,77,102,255,227,78,101,255,228,79,100,255,229,80,100,255,231,82,99,255,232,83,98,255,233,84,98,255,234,86,97,255,235,87,96,255,236,88,96,255,237,90,95,255,238,91,94,255,239,93,94,255,240,95,94,255,241,96,93,255,242,98,93,255,242,100,92,255,243,101,92,255,244,103,92,255,244,105,92,255,245,107,92,255,246,108,92,255,246,110,92,255,247,112,92,255,247,114,92,255,248,116,92,255,248,118,92,255,249,120,93,255,249,121,93,255,249,123,93,255,250,125,94,255,250,127,94,255,250,129,95,255,251,131,95,255,251,133,96,255,251,135,97,255,252,137,97,255,252,138,98,255,252,140,99,255,252,142,100,255,252,144,101,255,253,146,102,255,253,148,103,255,253,150,104,255,253,152,105,255,253,154,106,255,253,155,107,255,254,157,108,255,254,159,109,255,254,161,110,255,254,163,111,255,254,165,113,255,254,167,114,255,254,169,115,255,254,170,116,255,254,172,118,255,254,174,119,255,254,176,120,255,254,178,122,255,254,180,123,255,254,182,124,255,254,183,126,255,254,185,127,255,254,187,129,255,254,189,130,255,254,191,132,255,254,193,133,255,254,194,135,255,254,196,136,255,254,198,138,255,254,200,140,255,254,202,141,255,254,204,143,255,254,205,144,255,254,207,146,255,254,209,148,255,254,211,149,255,254,213,151,255,254,215,153,255,254,216,154,255,253,218,156,255,253,220,158,255,253,222,160,255,253,224,161,255,253,226,163,255,253,227,165,255,253,229,167,255,253,231,169,255,253,233,170,255,253,235,172,255,252,236,174,255,252,238,176,255,252,240,178,255,252,242,180,255,252,244,182,255,252,246,184,255,252,247,185,255,252,249,187,255,252,251,189,255,252,253,191,255]),plasma:new Uint8Array([13,8,135,255,16,7,136,255,19,7,137,255,22,7,138,255,25,6,140,255,27,6,141,255,29,6,142,255,32,6,143,255,34,6,144,255,36,6,145,255,38,5,145,255,40,5,146,255,42,5,147,255,44,5,148,255,46,5,149,255,47,5,150,255,49,5,151,255,51,5,151,255,53,4,152,255,55,4,153,255,56,4,154,255,58,4,154,255,60,4,155,255,62,4,156,255,63,4,156,255,65,4,157,255,67,3,158,255,68,3,158,255,70,3,159,255,72,3,159,255,73,3,160,255,75,3,161,255,76,2,161,255,78,2,162,255,80,2,162,255,81,2,163,255,83,2,163,255,85,2,164,255,86,1,164,255,88,1,164,255,89,1,165,255,91,1,165,255,92,1,166,255,94,1,166,255,96,1,166,255,97,0,167,255,99,0,167,255,100,0,167,255,102,0,167,255,103,0,168,255,105,0,168,255,106,0,168,255,108,0,168,255,110,0,168,255,111,0,168,255,113,0,168,255,114,1,168,255,116,1,168,255,117,1,168,255,119,1,168,255,120,1,168,255,122,2,168,255,123,2,168,255,125,3,168,255,126,3,168,255,128,4,168,255,129,4,167,255,131,5,167,255,132,5,167,255,134,6,166,255,135,7,166,255,136,8,166,255,138,9,165,255,139,10,165,255,141,11,165,255,142,12,164,255,143,13,164,255,145,14,163,255,146,15,163,255,148,16,162,255,149,17,161,255,150,19,161,255,152,20,160,255,153,21,159,255,154,22,159,255,156,23,158,255,157,24,157,255,158,25,157,255,160,26,156,255,161,27,155,255,162,29,154,255,163,30,154,255,165,31,153,255,166,32,152,255,167,33,151,255,168,34,150,255,170,35,149,255,171,36,148,255,172,38,148,255,173,39,147,255,174,40,146,255,176,41,145,255,177,42,144,255,178,43,143,255,179,44,142,255,180,46,141,255,181,47,140,255,182,48,139,255,183,49,138,255,184,50,137,255,186,51,136,255,187,52,136,255,188,53,135,255,189,55,134,255,190,56,133,255,191,57,132,255,192,58,131,255,193,59,130,255,194,60,129,255,195,61,128,255,196,62,127,255,197,64,126,255,198,65,125,255,199,66,124,255,200,67,123,255,201,68,122,255,202,69,122,255,203,70,121,255,204,71,120,255,204,73,119,255,205,74,118,255,206,75,117,255,207,76,116,255,208,77,115,255,209,78,114,255,210,79,113,255,211,81,113,255,212,82,112,255,213,83,111,255,213,84,110,255,214,85,109,255,215,86,108,255,216,87,107,255,217,88,106,255,218,90,106,255,218,91,105,255,219,92,104,255,220,93,103,255,221,94,102,255,222,95,101,255,222,97,100,255,223,98,99,255,224,99,99,255,225,100,98,255,226,101,97,255,226,102,96,255,227,104,95,255,228,105,94,255,229,106,93,255,229,107,93,255,230,108,92,255,231,110,91,255,231,111,90,255,232,112,89,255,233,113,88,255,233,114,87,255,234,116,87,255,235,117,86,255,235,118,85,255,236,119,84,255,237,121,83,255,237,122,82,255,238,123,81,255,239,124,81,255,239,126,80,255,240,127,79,255,240,128,78,255,241,129,77,255,241,131,76,255,242,132,75,255,243,133,75,255,243,135,74,255,244,136,73,255,244,137,72,255,245,139,71,255,245,140,70,255,246,141,69,255,246,143,68,255,247,144,68,255,247,145,67,255,247,147,66,255,248,148,65,255,248,149,64,255,249,151,63,255,249,152,62,255,249,154,62,255,250,155,61,255,250,156,60,255,250,158,59,255,251,159,58,255,251,161,57,255,251,162,56,255,252,163,56,255,252,165,55,255,252,166,54,255,252,168,53,255,252,169,52,255,253,171,51,255,253,172,51,255,253,174,50,255,253,175,49,255,253,177,48,255,253,178,47,255,253,180,47,255,253,181,46,255,254,183,45,255,254,184,44,255,254,186,44,255,254,187,43,255,254,189,42,255,254,190,42,255,254,192,41,255,253,194,41,255,253,195,40,255,253,197,39,255,253,198,39,255,253,200,39,255,253,202,38,255,253,203,38,255,252,205,37,255,252,206,37,255,252,208,37,255,252,210,37,255,251,211,36,255,251,213,36,255,251,215,36,255,250,216,36,255,250,218,36,255,249,220,36,255,249,221,37,255,248,223,37,255,248,225,37,255,247,226,37,255,247,228,37,255,246,230,38,255,246,232,38,255,245,233,38,255,245,235,39,255,244,237,39,255,243,238,39,255,243,240,39,255,242,242,39,255,241,244,38,255,241,245,37,255,240,247,36,255,240,249,33,255])};function j(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function H(t,e){return void 0!==t?t:e}function K(t,e,i,o,n){let r;return t&&(t.viewport(0,0,o,n),r=t.createTexture(),t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.LUMINANCE,o,n,0,t.LUMINANCE,t.FLOAT,new Float32Array(i))),{textureData:r,width:o,height:n,data:i,id:e}}function q(t,e){t&&t.deleteTexture(e.textureData)}const $="\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform mat3 u_matrix;\nuniform vec2 u_resolution;\nvarying vec2 v_texCoord;\nvoid main() {\n  // apply transformation matrix\n  vec2 position = (u_matrix * vec3(a_position, 1)).xy;\n  // convert the rectangle from pixels to 0.0 to 1.0\n  vec2 zeroToOne = position / u_resolution;\n  // convert from 0->1 to 0->2\n  vec2 zeroToTwo = zeroToOne * 2.0;\n  // convert from 0->2 to -1->+1 (clipspace)\n  vec2 clipSpace = zeroToTwo - 1.0;\n  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n  // pass the texCoord to the fragment shader\n  // The GPU will interpolate this value between points.\n  v_texCoord = a_texCoord;\n}",Z="\nprecision mediump float;\n// our textur\nuniform sampler2D u_textureData;\nuniform sampler2D u_textureScale;\nuniform vec2 u_textureSize;\nuniform vec2 u_domain;\nuniform float u_noDataValue;\nuniform bool u_clampLow;\nuniform bool u_clampHigh;\n// the texCoords passed in from the vertex shader.\nvarying vec2 v_texCoord;\nvoid main() {\n  vec2 onePixel = vec2(1.0, 1.0) / u_textureSize;\n  float value = texture2D(u_textureData, v_texCoord)[0];\n  if (value == u_noDataValue)\n    gl_FragColor = vec4(0.0, 0, 0, 0.0);\n  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))\n    gl_FragColor = vec4(0, 0, 0, 0);\n  else {\n    float normalisedValue = (value - u_domain[0]) / (u_domain[1] - u_domain[0]);\n    gl_FragColor = texture2D(u_textureScale, vec2(normalisedValue, 0));\n  }\n}";class J{constructor(t){let e;if(this.datasetCollection={},this.currentDataset=null,this.setCanvas(t.canvas),H(t.useWebGL,!0)&&(e=function(t,e){const i=["webgl","experimental-webgl"];let o=null;for(let e=0;e<i.length;++e){try{o=t.getContext(i[e],void 0)}catch(t){}if(o)break}return o&&o.getExtension("OES_texture_float")?o:null}(this.canvas))){this.gl=e,this.program=function(t,e,i){const o=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(o));const n=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(n,i),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n));const r=t.createProgram();return t.attachShader(r,o),t.attachShader(r,n),t.linkProgram(r),r}(e,$,Z),e.useProgram(this.program);const t=e.getAttribLocation(this.program,"a_texCoord");this.texCoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texCoordBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,2,e.FLOAT,!1,0,0)}else this.ctx=this.canvas.getContext("2d");if(t.colorScaleImage?this.setColorScaleImage(t.colorScaleImage):this.setColorScale(H(t.colorScale,"viridis")),this.setDomain(H(t.domain,[0,1])),this.setClamp(H(t.clampLow,!0),t.clampHigh),this.setNoDataValue(t.noDataValue),t.data){const e=t.data.length;this.setData(t.data,H(t.width,t.data[e-2]),H(t.height,t.data[e-2]))}if(t.datasets)for(let e=0;e<t.datasets.length;++e){const i=t.datasets[e];this.addDataset(i.id,i.data,i.width,i.height)}t.matrix?this.matrix=t.matrix:this.matrix=[1,0,0,0,1,0,0,0,1]}getData(){const t=this.currentDataset;if(!t)throw new Error("No dataset available.");return t.data}atPoint(t,e){const i=this.currentDataset;if(!i)throw new Error("No dataset available.");if(t>=i.width||e>=i.height)throw new Error("Coordinates are outside of image bounds.");return i.data[e*i.width+t]}setData(t,e,i){this.currentDataset&&null===this.currentDataset.id&&q(this.gl,this.currentDataset),this.currentDataset=K(this.gl,null,t,e,i)}addDataset(t,e,i,o){if(this.datasetAvailable(t))throw new Error(`There is already a dataset registered with id '${t}'`);this.datasetCollection[t]=K(this.gl,t,e,i,o),this.currentDataset||(this.currentDataset=this.datasetCollection[t])}setCurrentDataset(t){if(!this.datasetAvailable(t))throw new Error(`No such dataset registered: '${t}'`);this.currentDataset&&null===this.currentDataset.id&&q(this.gl,this.currentDataset),this.currentDataset=this.datasetCollection[t]}removeDataset(t){const e=this.datasetCollection[t];if(!e)throw new Error(`No such dataset registered: '${t}'`);q(this.gl,e),this.currentDataset===e&&(this.currentDataset=null),delete this.datasetCollection[t]}datasetAvailable(t){return j(this.datasetCollection,t)}getColorScaleImage(){return this.colorScaleImage}setCanvas(t){this.canvas=t||document.createElement("canvas")}setDomain(t){if(!t||2!==t.length)throw new Error("Invalid domain specified.");this.domain=t}getCanvas(){return this.canvas}setColorScale(t){if(!j(Y,t))throw new Error(`No such color scale '${t}'`);this.colorScaleCanvas||(this.colorScaleCanvas=document.createElement("canvas"),this.colorScaleCanvas.width=256,this.colorScaleCanvas.height=1),function(t,e){const i=Y[t];e.height=1;const o=e.getContext("2d");if("[object Object]"===Object.prototype.toString.call(i)){e.width=256;const t=o.createLinearGradient(0,0,256,1);for(let e=0;e<i.colors.length;++e)t.addColorStop(i.positions[e],i.colors[e]);o.fillStyle=t,o.fillRect(0,0,256,1)}else{if("[object Uint8Array]"!==Object.prototype.toString.call(i))throw new Error("Color scale not defined.");{e.width=256;const t=o.createImageData(256,1);t.data.set(i),o.putImageData(t,0,0)}}}(t,this.colorScaleCanvas),this.name=t,this.setColorScaleImage(this.colorScaleCanvas)}setClamp(t,e){this.clampLow=t,this.clampHigh=void 0!==e?e:t}setColorScaleImage(t){this.colorScaleImage=t;const e=this.gl;e&&(this.textureScale&&e.deleteTexture(this.textureScale),this.textureScale=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.textureScale),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t))}setNoDataValue(t){this.noDataValue=t}render(){const t=this.canvas,e=this.currentDataset;if(t.width=e.width,t.height=e.height,this.gl){const i=this.gl;i.viewport(0,0,e.width,e.height),i.useProgram(this.program),i.uniform1i(i.getUniformLocation(this.program,"u_textureData"),0),i.uniform1i(i.getUniformLocation(this.program,"u_textureScale"),1),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.textureData),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,this.textureScale);const o=i.getAttribLocation(this.program,"a_position"),n=i.getUniformLocation(this.program,"u_domain"),r=i.getUniformLocation(this.program,"u_resolution"),a=i.getUniformLocation(this.program,"u_noDataValue"),s=i.getUniformLocation(this.program,"u_clampLow"),h=i.getUniformLocation(this.program,"u_clampHigh"),l=i.getUniformLocation(this.program,"u_matrix");i.uniform2f(r,t.width,t.height),i.uniform2fv(n,this.domain),i.uniform1i(s,this.clampLow),i.uniform1i(h,this.clampHigh),i.uniform1f(a,this.noDataValue),i.uniformMatrix3fv(l,!1,this.matrix);const c=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,c),i.enableVertexAttribArray(o),i.vertexAttribPointer(o,2,i.FLOAT,!1,0,0),function(e,i,o,n,r){const a=0+t.width,s=0+t.height;e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,a,0,0,s,0,s,a,0,a,s]),e.STATIC_DRAW)}(i),i.drawArrays(i.TRIANGLES,0,6)}else if(this.ctx){const i=this.ctx,o=t.width,n=t.height,r=i.createImageData(o,n),a=this.domain[1]-this.domain[0],s=this.colorScaleCanvas.width,h=this.colorScaleCanvas.getContext("2d").getImageData(0,0,s,1).data;let l;const c=e.data;for(let t=0;t<n;t++)for(let e=0;e<o;e++){const i=t*o+e,n=4*(t*o+e);let u=Math.round((c[i]-this.domain[0])/a*s);l=255,u<0?(u=0,this.clampLow||(l=0)):u>255&&(u=255,this.clampHigh||(l=0)),c[i]===this.noDataValue&&(l=0),r.data[n+0]=h[4*u],r.data[n+1]=h[4*u+1],r.data[n+2]=h[4*u+2],r.data[n+3]=l}i.putImageData(r,0,0)}}renderDataset(t){return this.setCurrentDataset(t),this.render()}getColor(t){const e=this.colorScaleCanvas.width,i=this.colorScaleCanvas.getContext("2d").getImageData(0,0,e,1).data,o=this.domain[1]-this.domain[0];let n=Math.round((t-this.domain[0])/o*e),r=255;return n<0&&(n=0,this.clampLow||(r=0)),n>255&&(n=255,this.clampHigh||(r=0)),[i[4*n],i[4*n+1],i[4*n+2],r]}}var Q=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.snapToPixel_=t.snapToPixel};Q.prototype.getOpacity=function(){return this.opacity_},Q.prototype.getRotateWithView=function(){return this.rotateWithView_},Q.prototype.getRotation=function(){return this.rotation_},Q.prototype.getScale=function(){return this.scale_},Q.prototype.getSnapToPixel=function(){return this.snapToPixel_},Q.prototype.getAnchor=function(){},Q.prototype.getImage=function(t){},Q.prototype.getHitDetectionImage=function(t){},Q.prototype.getImageState=function(){},Q.prototype.getImageSize=function(){},Q.prototype.getHitDetectionImageSize=function(){},Q.prototype.getOrigin=function(){},Q.prototype.getSize=function(){},Q.prototype.setOpacity=function(t){this.opacity_=t},Q.prototype.setRotateWithView=function(t){this.rotateWithView_=t},Q.prototype.setRotation=function(t){this.rotation_=t},Q.prototype.setScale=function(t){this.scale_=t},Q.prototype.setSnapToPixel=function(t){this.snapToPixel_=t},Q.prototype.listenImageChange=function(t,e){},Q.prototype.load=function(){},Q.prototype.unlistenImageChange=function(t,e){};var tt=function(t){this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=t.atlasManager,this.render_(this.atlasManager_);var e=void 0===t.snapToPixel||t.snapToPixel,i=void 0!==t.rotateWithView&&t.rotateWithView;Q.call(this,{opacity:1,rotateWithView:i,rotation:void 0!==t.rotation?t.rotation:0,scale:1,snapToPixel:e})};e.inherits(tt,Q),tt.prototype.clone=function(){var t=new tt({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),snapToPixel:this.getSnapToPixel(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},tt.prototype.getAnchor=function(){return this.anchor_},tt.prototype.getAngle=function(){return this.angle_},tt.prototype.getFill=function(){return this.fill_},tt.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},tt.prototype.getImage=function(t){return this.canvas_},tt.prototype.getImageSize=function(){return this.imageSize_},tt.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},tt.prototype.getImageState=function(){return r.LOADED},tt.prototype.getOrigin=function(){return this.origin_},tt.prototype.getPoints=function(){return this.points_},tt.prototype.getRadius=function(){return this.radius_},tt.prototype.getRadius2=function(){return this.radius2_},tt.prototype.getSize=function(){return this.size_},tt.prototype.getStroke=function(){return this.stroke_},tt.prototype.listenImageChange=function(t,e){},tt.prototype.load=function(){},tt.prototype.unlistenImageChange=function(t,e){},tt.prototype.render_=function(t){var e,r,s="",h="",l=0,c=null,u=0,d=0;this.stroke_&&(null===(r=this.stroke_.getColor())&&(r=a.defaultStrokeStyle),r=i.asColorLike(r),void 0===(d=this.stroke_.getWidth())&&(d=a.defaultLineWidth),c=this.stroke_.getLineDash(),u=this.stroke_.getLineDashOffset(),n.CANVAS_LINE_DASH||(c=null,u=0),void 0===(h=this.stroke_.getLineJoin())&&(h=a.defaultLineJoin),void 0===(s=this.stroke_.getLineCap())&&(s=a.defaultLineCap),void 0===(l=this.stroke_.getMiterLimit())&&(l=a.defaultMiterLimit));var f=2*(this.radius_+d)+1,g={strokeStyle:r,strokeWidth:d,size:f,lineCap:s,lineDash:c,lineDashOffset:u,lineJoin:h,miterLimit:l};if(void 0===t){var p=o.createCanvasContext2D(f,f);this.canvas_=p.canvas,e=f=this.canvas_.width,this.draw_(g,p,0,0),this.createHitDetectionCanvas_(g)}else{f=Math.round(f);var m,_=!this.fill_;_&&(m=this.drawHitDetectionCanvas_.bind(this,g));var y=this.getChecksum(),v=t.add(y,f,f,this.draw_.bind(this,g),m);this.canvas_=v.image,this.origin_=[v.offsetX,v.offsetY],e=v.image.width,_?(this.hitDetectionCanvas_=v.hitImage,this.hitDetectionImageSize_=[v.hitImage.width,v.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[f/2,f/2],this.size_=[f,f],this.imageSize_=[e,e]},tt.prototype.draw_=function(t,e,o,n){var r,s,h;e.setTransform(1,0,0,1,0,0),e.translate(o,n),e.beginPath();var l=this.points_;if(l===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var c=void 0!==this.radius2_?this.radius2_:this.radius_;for(c!==this.radius_&&(l*=2),r=0;r<=l;r++)s=2*r*Math.PI/l-Math.PI/2+this.angle_,h=r%2==0?this.radius_:c,e.lineTo(t.size/2+h*Math.cos(s),t.size/2+h*Math.sin(s))}if(this.fill_){var u=this.fill_.getColor();null===u&&(u=a.defaultFillStyle),e.fillStyle=i.asColorLike(u),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},tt.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var e=o.createCanvasContext2D(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)}},tt.prototype.drawHitDetectionCanvas_=function(t,e,i,o){e.setTransform(1,0,0,1,0,0),e.translate(i,o),e.beginPath();var n=this.points_;if(n===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var r,s,h,l=void 0!==this.radius2_?this.radius2_:this.radius_;for(l!==this.radius_&&(n*=2),r=0;r<=n;r++)h=2*r*Math.PI/n-Math.PI/2+this.angle_,s=r%2==0?this.radius_:l,e.lineTo(t.size/2+s*Math.cos(h),t.size/2+s*Math.sin(h))}e.fillStyle=a.defaultFillStyle,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},tt.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){var i="r"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[i,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]};var et=function(t){var e=t||{};tt.call(this,{points:1/0,fill:e.fill,radius:e.radius,snapToPixel:e.snapToPixel,stroke:e.stroke,atlasManager:e.atlasManager})};e.inherits(et,tt),et.prototype.clone=function(){var t=new et({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),snapToPixel:this.getSnapToPixel(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},et.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)};var it=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0};it.prototype.clone=function(){var t=this.getColor();return new it({color:t&&t.slice?t.slice():t||void 0})},it.prototype.getColor=function(){return this.color_},it.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},it.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.color_ instanceof CanvasPattern||this.color_ instanceof CanvasGradient?this.checksum_=e.getUid(this.color_).toString():this.checksum_="f"+(this.color_?s.asString(this.color_):"-")),this.checksum_};var ot=function(t){var e=t||{};this.geometry_=null,this.geometryFunction_=ot.defaultGeometryFunction,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};ot.prototype.clone=function(){var t=this.getGeometry();return t&&t.clone&&(t=t.clone()),new ot({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},ot.prototype.getRenderer=function(){return this.renderer_},ot.prototype.setRenderer=function(t){this.renderer_=t},ot.prototype.getGeometry=function(){return this.geometry_},ot.prototype.getGeometryFunction=function(){return this.geometryFunction_},ot.prototype.getFill=function(){return this.fill_},ot.prototype.setFill=function(t){this.fill_=t},ot.prototype.getImage=function(){return this.image_},ot.prototype.setImage=function(t){this.image_=t},ot.prototype.getStroke=function(){return this.stroke_},ot.prototype.setStroke=function(t){this.stroke_=t},ot.prototype.getText=function(){return this.text_},ot.prototype.setText=function(t){this.text_=t},ot.prototype.getZIndex=function(){return this.zIndex_},ot.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=ot.defaultGeometryFunction,this.geometry_=t},ot.prototype.setZIndex=function(t){this.zIndex_=t},ot.createFunction=function(t){var e,i;return"function"==typeof t?e=t:(Array.isArray(t)?i=t:(h.assert(t instanceof ot,41),i=[t]),e=function(){return i}),e},ot.default_=null,ot.defaultFunction=function(t,e){if(!ot.default_){var i=new it({color:"rgba(255,255,255,0.4)"}),o=new c({color:"#3399CC",width:1.25});ot.default_=[new ot({image:new et({fill:i,stroke:o,radius:5}),fill:i,stroke:o})]}return ot.default_},ot.createDefaultEditing=function(){var t={},e=[255,255,255,1],i=[0,153,255,1];return t[l.POLYGON]=[new ot({fill:new it({color:[255,255,255,.5]})})],t[l.MULTI_POLYGON]=t[l.POLYGON],t[l.LINE_STRING]=[new ot({stroke:new c({color:e,width:5})}),new ot({stroke:new c({color:i,width:3})})],t[l.MULTI_LINE_STRING]=t[l.LINE_STRING],t[l.CIRCLE]=t[l.POLYGON].concat(t[l.LINE_STRING]),t[l.POINT]=[new ot({image:new et({radius:6,fill:new it({color:i}),stroke:new c({color:e,width:1.5})}),zIndex:1/0})],t[l.MULTI_POINT]=t[l.POINT],t[l.GEOMETRY_COLLECTION]=t[l.POLYGON].concat(t[l.LINE_STRING],t[l.POINT]),t},ot.defaultGeometryFunction=function(t){return t.getGeometry()};var nt=function(t){if(f.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,u.listen(this,f.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),void 0!==t)if(t instanceof g||!t){var e=t;this.setGeometry(e)}else{var i=t;this.setProperties(i)}};e.inherits(nt,f),nt.prototype.clone=function(){var t=new nt(this.getProperties());t.setGeometryName(this.getGeometryName());var e=this.getGeometry();e&&t.setGeometry(e.clone());var i=this.getStyle();return i&&t.setStyle(i),t},nt.prototype.getGeometry=function(){return this.get(this.geometryName_)},nt.prototype.getId=function(){return this.id_},nt.prototype.getGeometryName=function(){return this.geometryName_},nt.prototype.getStyle=function(){return this.style_},nt.prototype.getStyleFunction=function(){return this.styleFunction_},nt.prototype.handleGeometryChange_=function(){this.changed()},nt.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(u.unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=u.listen(t,d.CHANGE,this.handleGeometryChange_,this)),this.changed()},nt.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},nt.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?nt.createStyleFunction(t):void 0,this.changed()},nt.prototype.setId=function(t){this.id_=t,this.changed()},nt.prototype.setGeometryName=function(t){u.unlisten(this,f.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,u.listen(this,f.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},nt.createStyleFunction=function(t){var e,i;return"function"==typeof t?e=2==t.length?function(e){return t(this,e)}:t:(Array.isArray(t)?i=t:(h.assert(t instanceof ot,41),i=[t]),e=function(){return i}),e};var rt=function(t,e){_.call(this),this.setCoordinates(t,e)};e.inherits(rt,_),rt.prototype.clone=function(){var t=new rt(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},rt.prototype.closestPointXY=function(t,e,i,o){var n=this.flatCoordinates,r=v.squaredDistance(t,e,n[0],n[1]);if(r<o){var a,s=this.stride;for(a=0;a<s;++a)i[a]=n[a];return i.length=s,r}return o},rt.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},rt.prototype.computeExtent=function(t){return p.createOrUpdateFromCoordinate(this.flatCoordinates,t)},rt.prototype.getType=function(){return l.POINT},rt.prototype.intersectsExtent=function(t){return p.containsXY(t,this.flatCoordinates[0],this.flatCoordinates[1])},rt.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=y.coordinate(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(m.XY,null)},rt.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()};var at=function(t){var e=t||{};this.geometry_=null,this.geometryFunction_=at.defaultGeometryFunction,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};at.prototype.clone=function(){var t=this.getGeometry();return t&&t.clone&&(t=t.clone()),new at({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},at.prototype.getRenderer=function(){return this.renderer_},at.prototype.setRenderer=function(t){this.renderer_=t},at.prototype.getGeometry=function(){return this.geometry_},at.prototype.getGeometryFunction=function(){return this.geometryFunction_},at.prototype.getFill=function(){return this.fill_},at.prototype.setFill=function(t){this.fill_=t},at.prototype.getImage=function(){return this.image_},at.prototype.setImage=function(t){this.image_=t},at.prototype.getStroke=function(){return this.stroke_},at.prototype.setStroke=function(t){this.stroke_=t},at.prototype.getText=function(){return this.text_},at.prototype.setText=function(t){this.text_=t},at.prototype.getZIndex=function(){return this.zIndex_},at.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=at.defaultGeometryFunction,this.geometry_=t},at.prototype.setZIndex=function(t){this.zIndex_=t},at.createFunction=function(t){var e,i;return"function"==typeof t?e=t:(Array.isArray(t)?i=t:(h.assert(t instanceof at,41),i=[t]),e=function(){return i}),e},at.default_=null,at.defaultFunction=function(t,e){if(!at.default_){var i=new it({color:"rgba(255,255,255,0.4)"}),o=new c({color:"#3399CC",width:1.25});at.default_=[new at({image:new et({fill:i,stroke:o,radius:5}),fill:i,stroke:o})]}return at.default_},at.createDefaultEditing=function(){var t={},e=[255,255,255,1],i=[0,153,255,1];return t[l.POLYGON]=[new at({fill:new it({color:[255,255,255,.5]})})],t[l.MULTI_POLYGON]=t[l.POLYGON],t[l.LINE_STRING]=[new at({stroke:new c({color:e,width:5})}),new at({stroke:new c({color:i,width:3})})],t[l.MULTI_LINE_STRING]=t[l.LINE_STRING],t[l.CIRCLE]=t[l.POLYGON].concat(t[l.LINE_STRING]),t[l.POINT]=[new at({image:new et({radius:6,fill:new it({color:i}),stroke:new c({color:e,width:1.5})}),zIndex:1/0})],t[l.MULTI_POINT]=t[l.POINT],t[l.GEOMETRY_COLLECTION]=t[l.POLYGON].concat(t[l.LINE_STRING],t[l.POINT]),t},at.defaultGeometryFunction=function(t){return t.getGeometry()};var st=function(t,e,i,o,n,a){I.call(this),this.hitDetectionImage_=null,this.image_=t||new Image,null!==o&&(this.image_.crossOrigin=o),this.canvas_=a?document.createElement("CANVAS"):null,this.color_=a,this.imageListenerKeys_=null,this.imageState_=n,this.size_=i,this.src_=e,this.tainting_=!1,this.imageState_==r.LOADED&&this.determineTainting_()};e.inherits(st,I),st.get=function(t,e,i,o,n,r){var a=C.iconImageCache,s=a.get(e,o,r);return s||(s=new st(t,e,i,o,n,r),a.set(e,o,r,s)),s},st.prototype.determineTainting_=function(){var t=o.createCanvasContext2D(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainting_=!0}},st.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(d.CHANGE)},st.prototype.handleImageError_=function(){this.imageState_=r.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},st.prototype.handleImageLoad_=function(){this.imageState_=r.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.determineTainting_(),this.replaceColor_(),this.dispatchChangeEvent_()},st.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},st.prototype.getImageState=function(){return this.imageState_},st.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.tainting_){var e=this.size_[0],i=this.size_[1],n=o.createCanvasContext2D(e,i);n.fillRect(0,0,e,i),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},st.prototype.getSize=function(){return this.size_},st.prototype.getSrc=function(){return this.src_},st.prototype.load=function(){if(this.imageState_==r.IDLE){this.imageState_=r.LOADING,this.imageListenerKeys_=[u.listenOnce(this.image_,d.ERROR,this.handleImageError_,this),u.listenOnce(this.image_,d.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},st.prototype.replaceColor_=function(){if(!this.tainting_&&null!==this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,o=this.color_[0]/255,n=this.color_[1]/255,r=this.color_[2]/255,a=0,s=i.length;a<s;a+=4)i[a]*=o,i[a+1]*=n,i[a+2]*=r;t.putImageData(e,0,0)}},st.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(u.unlistenByKey),this.imageListenerKeys_=null};var ht=function(t){var i=t||{};this.anchor_=void 0!==i.anchor?i.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==i.anchorOrigin?i.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==i.anchorXUnits?i.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==i.anchorYUnits?i.anchorYUnits:"fraction",this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null;var o=void 0!==i.img?i.img:null,n=void 0!==i.imgSize?i.imgSize:null,a=i.src;h.assert(!(void 0!==a&&o),4),h.assert(!o||o&&n,5),void 0!==a&&0!==a.length||!o||(a=o.src||e.getUid(o).toString()),h.assert(void 0!==a&&a.length>0,6);var l=void 0!==i.src?r.IDLE:r.LOADED;this.color_=void 0!==i.color?s.asArray(i.color):null,this.iconImage_=st.get(o,a,n,this.crossOrigin_,l,this.color_),this.offset_=void 0!==i.offset?i.offset:[0,0],this.offsetOrigin_=void 0!==i.offsetOrigin?i.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==i.size?i.size:null;var c=void 0!==i.opacity?i.opacity:1,u=void 0!==i.rotateWithView&&i.rotateWithView,d=void 0!==i.rotation?i.rotation:0,f=void 0!==i.scale?i.scale:1,g=void 0===i.snapToPixel||i.snapToPixel;Q.call(this,{opacity:c,rotation:d,scale:f,snapToPixel:g,rotateWithView:u})};e.inherits(ht,Q),ht.prototype.clone=function(){return new ht({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),snapToPixel:this.getSnapToPixel(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},ht.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},ht.prototype.getColor=function(){return this.color_},ht.prototype.getImage=function(t){return this.iconImage_.getImage(t)},ht.prototype.getImageSize=function(){return this.iconImage_.getSize()},ht.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},ht.prototype.getImageState=function(){return this.iconImage_.getImageState()},ht.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},ht.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if("top-left"!=this.offsetOrigin_){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=i[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_},ht.prototype.getSrc=function(){return this.iconImage_.getSrc()},ht.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},ht.prototype.listenImageChange=function(t,e){return u.listen(this.iconImage_,d.CHANGE,t,e)},ht.prototype.load=function(){this.iconImage_.load()},ht.prototype.unlistenImageChange=function(t,e){u.unlisten(this.iconImage_,d.CHANGE,t,e)};var lt={};lt.DOCUMENT=document.implementation.createDocument("","",null),lt.createElementNS=function(t,e){return lt.DOCUMENT.createElementNS(t,e)},lt.getAllTextContent=function(t,e){return lt.getAllTextContent_(t,e,[]).join("")},lt.getAllTextContent_=function(t,e,i){var o;if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?i.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):i.push(t.nodeValue);else for(o=t.firstChild;o;o=o.nextSibling)lt.getAllTextContent_(o,e,i);return i},lt.isDocument=function(t){return t instanceof Document},lt.isNode=function(t){return t instanceof Node},lt.getAttributeNS=function(t,e,i){return t.getAttributeNS(e,i)||""},lt.setAttributeNS=function(t,e,i,o){t.setAttributeNS(e,i,o)},lt.parse=function(t){return(new DOMParser).parseFromString(t,"application/xml")},lt.makeArrayExtender=function(t,e){return function(i,o){var n=t.call(e,i,o);if(void 0!==n){var r=o[o.length-1];E.extend(r,n)}}},lt.makeArrayPusher=function(t,e){return function(i,o){var n=t.call(void 0!==e?e:this,i,o);void 0!==n&&o[o.length-1].push(n)}},lt.makeReplacer=function(t,e){return function(i,o){var n=t.call(void 0!==e?e:this,i,o);void 0!==n&&(o[o.length-1]=n)}},lt.makeObjectPropertyPusher=function(t,e,i){return function(o,n){var r=t.call(void 0!==i?i:this,o,n);if(void 0!==r){var a=n[n.length-1],s=void 0!==e?e:o.localName;(s in a?a[s]:a[s]=[]).push(r)}}},lt.makeObjectPropertySetter=function(t,e,i){return function(o,n){var r=t.call(void 0!==i?i:this,o,n);void 0!==r&&(n[n.length-1][void 0!==e?e:o.localName]=r)}},lt.makeChildAppender=function(t,e){return function(i,o,n){t.call(void 0!==e?e:this,i,o,n),n[n.length-1].node.appendChild(i)}},lt.makeArraySerializer=function(t,e){var i,o;return function(e,n,r){if(void 0===i){i={};var a={};a[e.localName]=t,i[e.namespaceURI]=a,o=lt.makeSimpleNodeFactory(e.localName)}lt.serialize(i,o,n,r)}},lt.makeSimpleNodeFactory=function(t,e){var i=t;return function(t,o,n){var r=o[o.length-1].node,a=i;void 0===a&&(a=n);var s=e;return void 0===e&&(s=r.namespaceURI),lt.createElementNS(s,a)}},lt.OBJECT_PROPERTY_NODE_FACTORY=lt.makeSimpleNodeFactory(),lt.makeSequence=function(t,e){for(var i=e.length,o=new Array(i),n=0;n<i;++n)o[n]=t[e[n]];return o},lt.makeStructureNS=function(t,e,i){var o,n,r=void 0!==i?i:{};for(o=0,n=t.length;o<n;++o)r[t[o]]=e;return r},lt.parseNode=function(t,e,i,o){var n;for(n=e.firstElementChild;n;n=n.nextElementSibling){var r=t[n.namespaceURI];if(void 0!==r){var a=r[n.localName];void 0!==a&&a.call(o,n,i)}}},lt.pushParseAndPop=function(t,e,i,o,n){return o.push(t),lt.parseNode(e,i,o,n),o.pop()},lt.serialize=function(t,e,i,o,n,r){for(var a,s,h=(void 0!==n?n:i).length,l=0;l<h;++l)void 0!==(a=i[l])&&void 0!==(s=e.call(r,a,o,void 0!==n?n[l]:void 0))&&t[s.namespaceURI][s.localName].call(r,s,a,o)},lt.pushSerializeAndPop=function(t,e,i,o,n,r,a){return n.push(t),lt.serialize(e,i,o,n,r,a),n.pop()};var ct={loadFeaturesXhr:function(t,e,i,o){return function(n,r,a){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(n,r,a):t,!0),"arraybuffer"==e.getType()&&(s.responseType="arraybuffer"),s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var n,r=e.getType();"json"==r||"text"==r?n=s.responseText:"xml"==r?(n=s.responseXML)||(n=lt.parse(s.responseText)):"arraybuffer"==r&&(n=s.response),n?i.call(this,e.readFeatures(n,{featureProjection:a}),e.readProjection(n),e.getLastExtent()):o.call(this)}else o.call(this)}.bind(this),s.onerror=function(){o.call(this)}.bind(this),s.send()}},xhr:function(t,i){return ct.loadFeaturesXhr(t,i,function(t,e){this.addFeatures(t)},e.nullFunction)}},ut={all:function(t,e){return[[-1/0,-1/0,1/0,1/0]]},bbox:function(t,e){return[t]},tile:function(t){return function(e,i){var o=t.getZForResolution(i),n=t.getTileRangeForExtentAndZ(e,o),r=[],a=[o,0,0];for(a[1]=n.minX;a[1]<=n.maxX;++a[1])for(a[2]=n.minY;a[2]<=n.maxY;++a[2])r.push(t.getTileCoordExtent(a));return r}}},dt=function(t){var i=t||{};R.call(this,{attributions:i.attributions,logo:i.logo,projection:void 0,state:D.READY,wrapX:void 0===i.wrapX||i.wrapX}),this.loader_=e.nullFunction,this.format_=i.format,this.overlaps_=void 0==i.overlaps||i.overlaps,this.url_=i.url,void 0!==i.loader?this.loader_=i.loader:void 0!==this.url_&&(h.assert(this.format_,7),this.loader_=ct.xhr(this.url_,this.format_)),this.strategy_=void 0!==i.strategy?i.strategy:ut.all;var o,n,r=void 0===i.useSpatialIndex||i.useSpatialIndex;this.featuresRtree_=r?new A:null,this.loadedExtentsRtree_=new A,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,i.features instanceof S?n=(o=i.features).getArray():Array.isArray(i.features)&&(n=i.features),r||void 0!==o||(o=new S(n)),void 0!==n&&this.addFeaturesInternal(n),void 0!==o&&this.bindFeaturesCollection_(o)};e.inherits(dt,R),dt.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},dt.prototype.addFeatureInternal=function(t){var i=e.getUid(t).toString();if(this.addToIndex_(i,t)){this.setupChangeEvents_(i,t);var o=t.getGeometry();if(o){var n=o.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[i]=t;this.dispatchEvent(new dt.Event("addfeature",t))}},dt.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[u.listen(e,d.CHANGE,this.handleFeatureChange_,this),u.listen(e,x.PROPERTYCHANGE,this.handleFeatureChange_,this)]},dt.prototype.addToIndex_=function(t,e){var i=!0,o=e.getId();return void 0!==o?o.toString()in this.idIndex_?i=!1:this.idIndex_[o.toString()]=e:(h.assert(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),i},dt.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},dt.prototype.addFeaturesInternal=function(t){var i,o,n,r,a=[],s=[],h=[];for(o=0,n=t.length;o<n;o++)r=t[o],i=e.getUid(r).toString(),this.addToIndex_(i,r)&&s.push(r);for(o=0,n=s.length;o<n;o++){r=s[o],i=e.getUid(r).toString(),this.setupChangeEvents_(i,r);var l=r.getGeometry();if(l){var c=l.getExtent();a.push(c),h.push(r)}else this.nullGeometryFeatures_[i]=r}for(this.featuresRtree_&&this.featuresRtree_.load(a,h),o=0,n=s.length;o<n;o++)this.dispatchEvent(new dt.Event("addfeature",s[o]))},dt.prototype.bindFeaturesCollection_=function(t){var e=!1;u.listen(this,"addfeature",function(i){e||(e=!0,t.push(i.feature),e=!1)}),u.listen(this,"removefeature",function(i){e||(e=!0,t.remove(i.feature),e=!1)}),u.listen(t,b.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),u.listen(t,b.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},dt.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(u.unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var i in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var o=new dt.Event("clear");this.dispatchEvent(o),this.changed()},dt.prototype.forEachFeature=function(t,e){return this.featuresRtree_?this.featuresRtree_.forEach(t,e):this.featuresCollection_?this.featuresCollection_.forEach(t,e):void 0},dt.prototype.forEachFeatureAtCoordinateDirect=function(t,e,i){var o=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(o,function(o){return o.getGeometry().intersectsCoordinate(t)?e.call(i,o):void 0})},dt.prototype.forEachFeatureInExtent=function(t,e,i){return this.featuresRtree_?this.featuresRtree_.forEachInExtent(t,e,i):this.featuresCollection_?this.featuresCollection_.forEach(e,i):void 0},dt.prototype.forEachFeatureIntersectingExtent=function(t,e,i){return this.forEachFeatureInExtent(t,function(o){if(o.getGeometry().intersectsExtent(t)){var n=e.call(i,o);if(n)return n}})},dt.prototype.getFeaturesCollection=function(){return this.featuresCollection_},dt.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),F.isEmpty(this.nullGeometryFeatures_)||E.extend(t,F.getValues(this.nullGeometryFeatures_))),t},dt.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},dt.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},dt.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],o=t[1],n=null,r=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],h=e||T.TRUE;return this.featuresRtree_.forEachInExtent(s,function(t){if(h(t)){var e=t.getGeometry(),l=a;if((a=e.closestPointXY(i,o,r,a))<l){n=t;var c=Math.sqrt(a);s[0]=i-c,s[1]=o-c,s[2]=i+c,s[3]=o+c}}}),n},dt.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},dt.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},dt.prototype.getFormat=function(){return this.format_},dt.prototype.getOverlaps=function(){return this.overlaps_},dt.prototype.getResolutions=function(){},dt.prototype.getUrl=function(){return this.url_},dt.prototype.handleFeatureChange_=function(t){var i=t.target,o=e.getUid(i).toString(),n=i.getGeometry();if(n){var r=n.getExtent();o in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[o],this.featuresRtree_&&this.featuresRtree_.insert(r,i)):this.featuresRtree_&&this.featuresRtree_.update(r,i)}else o in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(i),this.nullGeometryFeatures_[o]=i);var a=i.getId();if(void 0!==a){var s=a.toString();o in this.undefIdIndex_?(delete this.undefIdIndex_[o],this.idIndex_[s]=i):this.idIndex_[s]!==i&&(this.removeFromIdIndex_(i),this.idIndex_[s]=i)}else o in this.undefIdIndex_||(this.removeFromIdIndex_(i),this.undefIdIndex_[o]=i);this.changed(),this.dispatchEvent(new dt.Event("changefeature",i))},dt.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&F.isEmpty(this.nullGeometryFeatures_)},dt.prototype.loadFeatures=function(t,e,i){var o,n,r=this.loadedExtentsRtree_,a=this.strategy_(t,e);for(o=0,n=a.length;o<n;++o){var s=a[o];r.forEachInExtent(s,function(t){return p.containsExtent(t.extent,s)})||(this.loader_.call(this,s,e,i),r.insert(s,{extent:s.slice()}))}},dt.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,function(i){if(p.equals(i.extent,t))return e=i,!0}),e&&i.remove(e)},dt.prototype.removeFeature=function(t){var i=e.getUid(t).toString();i in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[i]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},dt.prototype.removeFeatureInternal=function(t){var i=e.getUid(t).toString();this.featureChangeKeys_[i].forEach(u.unlistenByKey),delete this.featureChangeKeys_[i];var o=t.getId();void 0!==o?delete this.idIndex_[o.toString()]:delete this.undefIdIndex_[i],this.dispatchEvent(new dt.Event("removefeature",t))},dt.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},dt.prototype.setLoader=function(t){this.loader_=t},dt.Event=function(t,e){w.call(this,t),this.feature=e},e.inherits(dt.Event,w);var ft=function(t){var e=t||{},i=F.assign({},e);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,k.call(this,i),this.declutter_=void 0!==e.declutter&&e.declutter,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting,this.renderMode_=e.renderMode||O.VECTOR,this.type=L.VECTOR};e.inherits(ft,k),ft.prototype.getDeclutter=function(){return this.declutter_},ft.prototype.setDeclutter=function(t){this.declutter_=t},ft.prototype.getRenderBuffer=function(){return this.renderBuffer_},ft.prototype.getRenderOrder=function(){return this.get(ft.Property_.RENDER_ORDER)},ft.prototype.getStyle=function(){return this.style_},ft.prototype.getStyleFunction=function(){return this.styleFunction_},ft.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},ft.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},ft.prototype.setRenderOrder=function(t){this.set(ft.Property_.RENDER_ORDER,t)},ft.prototype.setStyle=function(t){this.style_=void 0!==t?t:ot.defaultFunction,this.styleFunction_=null===t?void 0:ot.createFunction(this.style_),this.changed()},ft.prototype.getRenderMode=function(){return this.renderMode_},ft.Property_={RENDER_ORDER:"renderOrder"};const gt=300,pt=new at({image:new ht({anchor:[.5,.5],anchorXUnits:"fraction",anchorYUnits:"fraction",src:"assets/skull.png"})});class mt{constructor(){this.time=0,this.y=0,this.score=0,this.hiddenRefresh=!1}async onSearch(t){const e=t.target.value.trim();if(e.length>0){const t=await fetch(`https://nominatim.openstreetmap.org/search/${e}?format=json&addressdetails=1&limit=1`),i=await t.json();if(i.length>0){const t=i[0],e=this.map.getView(),[o,n,r,a]=t.boundingbox,s=[parseFloat(r),parseFloat(o),parseFloat(a),parseFloat(n)],h=this.proj.transformExtent(s,"EPSG:4326","EPSG:3857");e.fit(h,{duration:300})}}}async componentDidLoad(){const[t]=await Promise.all([await N(20,gt),await this.loadMap()]);this.map.getView().setCenter(this.proj.fromLonLat([t.log,t.lat]));const e=U(100,t);(await M(e)).forEach(t=>this.addMarker(t))}async loadMap(){const{Map:t,Tile:e,OSM:i,View:o,Image:n,ImageStatic:r,proj:a}=await import("./maps.js");this.proj=a,this.Image=n,this.ImageStatic=r,this.vectorSource=new dt({features:[]});const s=this.el.querySelector(".mapa");this.map=new t({layers:[new e({source:new i}),new ft({source:this.vectorSource})],target:s,view:new o({center:a.fromLonLat([-4.7061376,41.662351099999995]),zoom:5})}),this.map.on("movestart",()=>{this.hiddenRefresh=!1,this.setScore(0)}),this.map.on("click",t=>{const e=this.map.forEachFeatureAtPixel(t.pixel,t=>t);e&&this.setScore(e.getProperties().deathRate)})}async updateMap(){const t=this.map.getView(),e=this.proj.toLonLat(t.getCenter()),i=t.calculateExtent(this.map.getSize()),o=this.proj.transformExtent(i,"EPSG:3857","EPSG:4326"),n=Math.max(o[2]-o[0],o[3]-o[1]);this.recompute({log:e[0],lat:e[1],angle:n/2,resolution:300}),this.hiddenRefresh=!0}async recompute(t){const e=await this.loadingCtrl.create({content:"generando heatmap..."});await e.present();const i=this.el.querySelector("canvas"),o=await P(B,t,X),n=Math.min(...o),r=Math.max(...o);this.setScore(z(o)),new J({canvas:i,data:o,width:gt,height:gt,domain:[n,r],colorScale:"magma"}).render(),requestAnimationFrame(()=>{const o=i.toDataURL();var n=G(t);const r=new this.Image({source:new this.ImageStatic({url:o,projection:"EPSG:4326",imageExtent:n}),opacity:.8});this.layer&&this.map.removeLayer(this.layer),this.layer=r,this.map.addLayer(r),e.dismiss()})}addMarker(t){const e=new nt({geometry:new rt(this.proj.fromLonLat([t.coord.log,t.coord.lat])),name:t.username,deathRate:t.deathRate});e.setStyle([pt]),this.vectorSource.addFeature(e)}setScore(t){this.y=this.score=Math.floor(t)}render(){const e=0===this.y?-100:this.y;return[t("ion-header",null,t("ion-toolbar",{color:"dark"},t("ion-buttons",{slot:"start"},t("ion-menu-toggle",null,t("ion-button",null,t("ion-icon",{name:"menu",slot:"icon-only"})))),t("ion-title",null,"Heat Map")),t("ion-toolbar",{color:"dark"},t("ion-searchbar",null))),t("ion-content",{scrollEnabled:!1},t("img",{class:"wait-meme",src:"assets/wait.svg"}),t("div",{class:"mapa"}),t("canvas",null),t("div",{class:"rate",style:{transform:`translateY(${-e}px`}},t("div",{class:"line"}),t("div",{class:"score"},this.score)),t("ion-fab",{horizontal:"center",vertical:"bottom",slot:"fixed",class:{"refresh-fab":!0,"hidden-fab":this.hiddenRefresh}},t("ion-fab-button",{color:"light",onClick:this.updateMap.bind(this)},t("ion-icon",{name:"refresh"}))))]}static get is(){return"map-page"}static get properties(){return{address:{state:!0},el:{elementRef:!0},hiddenRefresh:{state:!0},loadingCtrl:{connect:"ion-loading-controller"},score:{state:!0},time:{state:!0},y:{state:!0}}}static get listeners(){return[{name:"keydown.enter",method:"onSearch"}]}static get style(){return"map-page .mapa,map-page .scroll-inner{height:100%;width:100%}map-page canvas{display:none}map-page .refresh-fab{-webkit-transition:-webkit-transform .1s ease-in-out;transition:-webkit-transform .1s ease-in-out;transition:transform .1s ease-in-out;transition:transform .1s ease-in-out,-webkit-transform .1s ease-in-out}map-page .hidden-fab{-webkit-transform:translateY(70px);transform:translateY(70px)}map-page .wait-meme{position:absolute;bottom:0;left:0;right:0;opacity:.08;pointer-events:none;z-index:-1}map-page .rate{will-change:transform;position:absolute;bottom:-65px;left:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;mix-blend-mode:color-dodge;-webkit-transition:-webkit-transform .8s ease-in-out;transition:-webkit-transform .8s ease-in-out;transition:transform .8s ease-in-out;transition:transform .8s ease-in-out,-webkit-transform .8s ease-in-out}map-page .rate>div{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}map-page .rate .score{font-family:Lobster,cursive;font-size:90px;text-align:center;color:#fff;mix-blend-mode:inherit}map-page .rate .line{width:50px;height:5px;margin-right:10px;background:#fff;mix-blend-mode:inherit}"}}class _t{constructor(){this.edge=!1,this.activated=!1}activatedChanged(){const t=this.activated,e=this.el.querySelector("ion-fab-button");e&&(e.activated=t),Array.from(this.el.querySelectorAll("ion-fab-list")).forEach(e=>{e.activated=t})}componentDidLoad(){this.activatedChanged()}onClick(){this.el.querySelector("ion-fab-list")&&(this.activated=!this.activated)}close(){this.activated=!1}hostData(){return{class:{[`fab-horizontal-${this.horizontal}`]:!!this.horizontal,[`fab-vertical-${this.vertical}`]:!!this.vertical,"fab-edge":this.edge}}}static get is(){return"ion-fab"}static get properties(){return{activated:{type:Boolean,attr:"activated",mutable:!0,watchCallbacks:["activatedChanged"]},close:{method:!0},edge:{type:Boolean,attr:"edge"},el:{elementRef:!0},horizontal:{type:String,attr:"horizontal"},vertical:{type:String,attr:"vertical"}}}static get listeners(){return[{name:"click",method:"onClick"}]}static get style(){return"ion-fab{position:absolute;z-index:999}.fab-horizontal-center{left:50%;margin-left:-28px}[dir=rtl] .fab-horizontal-center{right:50%;margin-right:-28px}.fab-horizontal-start{left:10px;left:calc(env(safe-area-inset-left) + 10px)}[dir=rtl] .fab-horizontal-start{right:10px;right:calc(env(safe-area-inset-left) + 10px)}.fab-horizontal-end{right:10px;right:calc(env(safe-area-inset-right) + 10px)}[dir=rtl] .fab-horizontal-end{left:10px;left:calc(env(safe-area-inset-right) + 10px)}.fab-vertical-top{top:10px}.fab-vertical-top.fab-edge{top:-28px}.fab-vertical-bottom{bottom:10px}.fab-vertical-bottom.fab-edge{bottom:-28px}.fab-vertical-center{margin-top:-28px;top:50%}"}}class yt{constructor(){this.inList=!1,this.activated=!1,this.disabled=!1,this.translucent=!1,this.show=!1}componentWillLoad(){const t=this.el.parentNode,e=t?t.nodeName:null;this.inList="ION-FAB-LIST"===e}getFabClassMap(){return{"fab-button-in-list":this.inList,[`fab-button-${this.mode}-in-list`]:this.inList,[`fab-button-translucent-${this.mode}-in-list`]:this.inList&&this.translucent,"fab-button-close-active":this.activated,"fab-button-show":this.show}}hostData(){const t=V(this.mode,this.color,"fab-button"),e=this.translucent?V(this.mode,this.color,"fab-button-translucent"):{};return{tappable:"",class:Object.assign({},this.getFabClassMap(),t,e)}}render(){const e=this.href?"a":"button";return t(e,{class:"fab-button-native",disabled:this.disabled,href:this.href},t("ion-icon",{name:"close",class:"fab-button-close-icon"}),t("span",{class:"fab-button-inner"},t("slot",null)),"md"===this.mode&&t("ion-ripple-effect",{tapClick:!0,parent:this.el}))}static get is(){return"ion-fab-button"}static get properties(){return{activated:{type:Boolean,attr:"activated"},color:{type:String,attr:"color"},disabled:{type:Boolean,attr:"disabled"},el:{elementRef:!0},href:{type:String,attr:"href"},mode:{type:String,attr:"mode"},show:{type:Boolean,attr:"show"},translucent:{type:Boolean,attr:"translucent"}}}static get style(){return"ion-fab-button{--ion-color-base:var(--ion-color-primary, #3880ff);--ion-color-contrast:var(--ion-color-primary-contrast, #fff);--ion-color-tint:var(--ion-color-primary-tint, #4c8dff);--size:56px;--background:var(--ion-color-base);--transition:background-color,opacity 100ms linear;--padding-start:calc((56px - var(--size)) / 2);--padding-end:calc((56px - var(--size)) / 2);--padding-top:calc((56px - var(--size)) / 2);--padding-bottom:calc((56px - var(--size)) / 2);font-size:14px;color:var(--ion-color-contrast)}ion-fab-button.activated{--background:var(--ion-color-tint)}.fab-button-native{margin:var(--padding-top) var(--padding-end) var(--padding-bottom) var(--padding-start);text-align:center;-moz-appearance:none;-ms-appearance:none;-webkit-appearance:none;appearance:none;border-radius:50%;position:relative;z-index:0;display:block;overflow:hidden;width:var(--size);height:var(--size);border:0;font-size:inherit;font-weight:inherit;line-height:var(--size);text-overflow:ellipsis;text-transform:none;white-space:nowrap;color:inherit;background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);cursor:pointer;-webkit-transform:var(--transform);transform:var(--transform);-webkit-transition:var(--transition);transition:var(--transition);background-clip:padding-box;-webkit-font-kerning:none;font-kerning:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;contain:strict}[dir=rtl] .fab-button-native{margin:var(--padding-top) var(--padding-start) var(--padding-bottom) var(--padding-end)}.fab-button-native:active,.fab-button-native:focus{outline:0}.fab-button ion-icon{font-size:24px;line-height:1}.fab-button-inner{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row nowrap;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;-webkit-transition:all ease-in-out .3s;transition:all ease-in-out .3s;-webkit-transition-property:opacity,-webkit-transform;transition-property:opacity,-webkit-transform;transition-property:transform,opacity;transition-property:transform,opacity,-webkit-transform}ion-fab-button[mini]{--size:40px}.fab-button-close-icon{left:0;right:0;top:0;position:absolute;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:100%;opacity:0;-webkit-transform:scale(.4) rotateZ(-45deg);transform:scale(.4) rotateZ(-45deg);-webkit-transition:all ease-in-out .3s;transition:all ease-in-out .3s;-webkit-transition-property:opacity,-webkit-transform;transition-property:opacity,-webkit-transform;transition-property:transform,opacity;transition-property:transform,opacity,-webkit-transform}.fab-button-close-icon .icon-inner{margin:auto}.fab-button-close-active .fab-button-close-icon{opacity:1;-webkit-transform:scale(1) rotateZ(0);transform:scale(1) rotateZ(0)}.fab-button-close-active .fab-button-inner{opacity:0;-webkit-transform:scale(.4) rotateZ(45deg);transform:scale(.4) rotateZ(45deg)}.fab-button ion-ripple-effect{--color:var(--ripple-color)}.fab-button-md{--box-shadow:0 4px 6px 0 rgba(0, 0, 0, 0.14),0 4px 5px rgba(0, 0, 0, 0.1);--transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1),background-color 300ms cubic-bezier(0.4, 0, 0.2, 1),color 300ms cubic-bezier(0.4, 0, 0.2, 1)}.fab-button-md.activated{--box-shadow:0 5px 15px 0 rgba(0, 0, 0, 0.4),0 4px 7px 0 rgba(0, 0, 0, 0.1)}.fab-button-md-in-list{--ion-color-contrast:var(--ion-color-light-contrast, #000);--ion-color-base:var(--ion-color-light, #f4f5f8);--transition:transform 200ms ease 10ms,opacity 200ms ease 10ms,box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1),background-color 300ms cubic-bezier(0.4, 0, 0.2, 1),color 300ms cubic-bezier(0.4, 0, 0.2, 1)}.fab-button-md-in-list.activated{--background:var(--ion-color-primary-tint, #4c8dff)}"}static get styleMode(){return"md"}}class vt{constructor(){this.isCancelVisible=!1,this.shouldBlur=!0,this.shouldAlignLeft=!0,this.activated=!1,this.focused=!1,this.animated=!1,this.autocomplete="off",this.autocorrect="off",this.cancelButtonText="Cancel",this.debounce=250,this.placeholder="Search",this.showCancelButton=!1,this.spellcheck=!1,this.type="search",this.value=""}debounceChanged(){this.ionChange=W(this.ionChange,this.debounce)}valueChanged(){const t=this.nativeInput,e=this.value;t&&t.value!==e&&(t.value=e),this.ionChange.emit({value:e})}componentDidLoad(){this.positionElements(),this.debounceChanged()}clearInput(){this.ionClear.emit(),setTimeout(()=>{const t=this.value;void 0!==t&&""!==t&&(this.value="")},64),this.shouldBlur=!1}cancelSearchbar(){this.ionCancel.emit(),this.clearInput(),this.shouldBlur=!0,this.activated=!1}onInput(t){const e=t.target;e&&(this.value=e.value),this.ionInput.emit(t)}inputUpdated(){this.positionElements()}onBlur(){const t=this.el.querySelector(".searchbar-input");if(!1===this.shouldBlur)return t.focus(),this.shouldBlur=!0,this.ionBlur.emit(),void this.inputUpdated();this.focused=!1,this.positionElements()}onFocus(){this.activated=!0,this.focused=!0,this.ionFocus.emit(),this.inputUpdated(),this.positionElements()}positionElements(){const t=this.shouldAlignLeft,e=!this.animated||this.value&&""!==this.value.toString().trim()||!0===this.focused;this.shouldAlignLeft=e,"ios"===this.mode&&(t!==e&&this.positionPlaceholder(),this.animated&&this.positionCancelButton())}positionPlaceholder(){const t="rtl"===this.doc.dir,e=this.el.querySelector(".searchbar-input"),i=this.el.querySelector(".searchbar-search-icon");if(this.shouldAlignLeft)e.removeAttribute("style"),i.removeAttribute("style");else{const o=this.doc,n=o.createElement("span");n.innerHTML=this.placeholder,o.body.appendChild(n);const r=n.offsetWidth;n.remove();const a="calc(50% - "+r/2+"px)",s="calc(50% - "+(r/2+30)+"px)";t?(e.style.paddingRight=a,i.style.marginRight=s):(e.style.paddingLeft=a,i.style.marginLeft=s)}}positionCancelButton(){const t="rtl"===this.doc.dir,e=this.el.querySelector(".searchbar-cancel-button-ios"),i=this.focused;if(i!==this.isCancelVisible){const o=e.style;if(this.isCancelVisible=i,i)t?o.marginLeft="0":o.marginRight="0";else{const i=e.offsetWidth;i>0&&(t?o.marginLeft=-i+"px":o.marginRight=-i+"px")}}}hostData(){return{class:{"searchbar-active":this.activated,"searchbar-animated":this.animated,"searchbar-has-value":""!==this.value,"searchbar-show-cancel":this.showCancelButton,"searchbar-left-aligned":this.shouldAlignLeft,"searchbar-has-focus":this.focused}}}render(){const e=V(this.mode,this.color,"searchbar-cancel-button"),i=V(this.mode,this.color,"searchbar-search-icon"),o=this.showCancelButton?t("button",{type:"button",tabindex:"ios"!==this.mode||this.activated?void 0:-1,onClick:this.cancelSearchbar.bind(this),onMouseDown:this.cancelSearchbar.bind(this),class:e},"md"===this.mode?t("ion-icon",{name:"md-arrow-back"}):this.cancelButtonText):null;return[t("div",{class:"searchbar-input-container"},"md"===this.mode&&o,t("div",{class:i}),t("input",{ref:t=>this.nativeInput=t,class:"searchbar-input",onInput:this.onInput.bind(this),onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),placeholder:this.placeholder,type:this.type,value:this.value,autoComplete:this.autocomplete,autoCorrect:this.autocorrect,spellCheck:this.spellcheck}),t("button",{type:"button",class:"searchbar-clear-icon",onClick:this.clearInput.bind(this),onMouseDown:this.clearInput.bind(this)})),"ios"===this.mode&&o]}static get is(){return"ion-searchbar"}static get host(){return{theme:"searchbar"}}static get properties(){return{activated:{state:!0},animated:{type:Boolean,attr:"animated"},autocomplete:{type:String,attr:"autocomplete"},autocorrect:{type:String,attr:"autocorrect"},cancelButtonText:{type:String,attr:"cancel-button-text"},color:{type:String,attr:"color"},debounce:{type:Number,attr:"debounce",watchCallbacks:["debounceChanged"]},doc:{context:"document"},el:{elementRef:!0},focused:{state:!0},mode:{type:String,attr:"mode"},placeholder:{type:String,attr:"placeholder"},showCancelButton:{type:Boolean,attr:"show-cancel-button"},spellcheck:{type:Boolean,attr:"spellcheck"},type:{type:String,attr:"type"},value:{type:String,attr:"value",mutable:!0,watchCallbacks:["valueChanged"]}}}static get events(){return[{name:"ionInput",method:"ionInput",bubbles:!0,cancelable:!0,composed:!0},{name:"ionChange",method:"ionChange",bubbles:!0,cancelable:!0,composed:!0},{name:"ionCancel",method:"ionCancel",bubbles:!0,cancelable:!0,composed:!0},{name:"ionClear",method:"ionClear",bubbles:!0,cancelable:!0,composed:!0},{name:"ionBlur",method:"ionBlur",bubbles:!0,cancelable:!0,composed:!0},{name:"ionFocus",method:"ionFocus",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return"ion-searchbar{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;width:100%}.searchbar-icon{pointer-events:none}.searchbar-input-container{position:relative;display:block;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1;width:100%}.searchbar-input{-moz-appearance:none;-ms-appearance:none;-webkit-appearance:none;appearance:none;-webkit-box-sizing:border-box;box-sizing:border-box;display:block;width:100%;border:0;font-family:inherit}.searchbar-input:active,.searchbar-input:focus{outline:0}.searchbar-input::-webkit-search-cancel-button{display:none}.searchbar-clear-icon{margin:0;padding:0;display:none;min-height:0}.searchbar-has-value.searchbar-has-focus .searchbar-clear-icon{display:block}.searchbar-md{padding:8px;font-family:Roboto,\"Helvetica Neue\",sans-serif;background:inherit}.searchbar-search-icon-md{left:16px;top:11px;background-image:url(\"data:image/svg+xml;charset=utf-8,<svg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'><path%20fill='var(--ion-text-color-step-400,%20%23666666)'%20d='M337.509,305.372h-17.501l-6.571-5.486c20.791-25.232,33.922-57.054,33.922-93.257C347.358,127.632,283.896,64,205.135,64C127.452,64,64,127.632,64,206.629s63.452,142.628,142.225,142.628c35.011,0,67.831-13.167,92.991-34.008l6.561,5.487v17.551L415.18,448L448,415.086L337.509,305.372z%20M206.225,305.372c-54.702,0-98.463-43.887-98.463-98.743c0-54.858,43.761-98.742,98.463-98.742c54.7,0,98.462,43.884,98.462,98.742C304.687,261.485,260.925,305.372,206.225,305.372z'/></svg>\");width:21px;height:21px}[dir=rtl] .searchbar-search-icon-md{right:16px;background-image:url(\"data:image/svg+xml;charset=utf-8,<svg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'><path%20transform='translate(512,%200)%20scale(-1,%201)'%20fill='var(--ion-text-color-step-400,%20%23666666)'%20d='M337.509,305.372h-17.501l-6.571-5.486c20.791-25.232,33.922-57.054,33.922-93.257C347.358,127.632,283.896,64,205.135,64C127.452,64,64,127.632,64,206.629s63.452,142.628,142.225,142.628c35.011,0,67.831-13.167,92.991-34.008l6.561,5.487v17.551L415.18,448L448,415.086L337.509,305.372z%20M206.225,305.372c-54.702,0-98.463-43.887-98.463-98.743c0-54.858,43.761-98.742,98.463-98.742c54.7,0,98.462,43.884,98.462,98.742C304.687,261.485,260.925,305.372,206.225,305.372z'/></svg>\")}.searchbar-cancel-button-md{left:10px;top:0;margin:0;display:none;height:100%;border:0;font-size:1.8em;color:var(--ion-text-color-step-100,#1a1a1a);background-color:transparent}[dir=rtl] .searchbar-cancel-button-md{right:10px}.searchbar-cancel-button-md,.searchbar-search-icon-md{position:absolute;background-repeat:no-repeat;background-size:20px}.searchbar-cancel-button-md.activated,.searchbar-search-icon-md.activated{background-color:transparent}.searchbar-md .searchbar-input{padding:6px 55px;border-radius:2px;background-position:left 8px center;height:auto;font-size:16px;font-weight:400;line-height:30px;color:var(--ion-text-color-step-150,#262626);background-color:var(--ion-background-color,#fff);-webkit-box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12);box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12)}.searchbar-md .searchbar-input::-moz-placeholder{color:var(--ion-placeholder-text-color,#999)}.searchbar-md .searchbar-input:-ms-input-placeholder{color:var(--ion-placeholder-text-color,#999)}.searchbar-md .searchbar-input::-webkit-input-placeholder{text-indent:0;color:var(--ion-placeholder-text-color,#999)}[dir=rtl] .searchbar-md .searchbar-input{background-position:right 8px center}.searchbar-md .searchbar-clear-icon{right:13px;top:0;background-image:url(\"data:image/svg+xml;charset=utf-8,<svg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'><polygon%20fill='var(--ion-text-color-step-400,%20%23666666)'%20points='405,136.798%20375.202,107%20256,226.202%20136.798,107%20107,136.798%20226.202,256%20107,375.202%20136.798,405%20256,285.798%20375.202,405%20405,375.202%20285.798,256'/></svg>\");padding:0;background-position:center;position:absolute;width:22px;height:100%;border:0;background-color:transparent;background-repeat:no-repeat;background-size:22px}[dir=rtl] .searchbar-md .searchbar-clear-icon{left:13px}.searchbar-md .searchbar-clear-icon.activated{background-color:transparent}.searchbar-has-focus.searchbar-show-cancel .searchbar-search-icon-md{display:none}.searchbar-has-focus.searchbar-show-cancel .searchbar-cancel-button-md{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex}.toolbar .searchbar-md{padding:3px}"}static get styleMode(){return"md"}}export{mt as MapPage,_t as IonFab,yt as IonFabButton,vt as IonSearchbar};