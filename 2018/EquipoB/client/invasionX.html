<html lang="en">
  <head>
    <link rel="stylesheet" href="https://openlayers.org/en/v4.6.5/css/ol.css" type="text/css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<style>
      .map {
        height: 600px;
        width: 600px;
      }
    </style>
    <script src="https://openlayers.org/en/v4.6.5/build/ol.js" type="text/javascript"></script>
    <title>InvasionX</title>
  </head>
  <body>
    <h2>My Map</h2>
    <div id="map" class="map"></div>
    <script type="text/javascript">
	function spreading()
	{
		var i = Math.floor(Math.random() * Math.floor(2));
		
		//When i'll get data from Simon, a "pixel" will have two option, dead or alive
		//Which means the last thing I have to do is making it dynamic for the user to see the propagation
		//Right now it only gives randomly a status to a "pixel"
		//0 = alive, 1 = dead
		if (i==0)
		{
			var styles = [
			new ol.style.Style({
			  fill: new ol.style.Fill({
				color: 'rgba(10, 10, 10, 0.5)'
			  })
			}),
			
		  ];
		}else{
		  var styles = [
			new ol.style.Style({
			  fill: new ol.style.Fill({
				color: 'rgba(255, 0, 0, 1)'
			  })
			}),
			
		  ];
	  }
	  return styles;
	}
	
	// Create vector source and the feature to it.
	var vectorSource = new ol.source.Vector();
	// Create vector layer attached to the vector source.
	var vectorLayer = new ol.layer.Vector({
	  source: vectorSource,
	  style:spreading
	});
	var map = new ol.Map({
		target: 'map',
		layers: [
		  new ol.layer.Tile({
			source: new ol.source.OSM()
		  }),
		  vectorLayer
		],
		
		view: new ol.View({
		  center: ol.proj.fromLonLat([3.80, 43.55]),
		  zoom: 10
		})
	});
	var bbox = map.getView().calculateExtent(map.getSize());
	bbox = ol.proj.transformExtent(bbox, 'EPSG:3857', 'EPSG:4326');
	
	var lon = bbox[0];
	var lat = bbox[1];
	x=(bbox[2]-bbox[0])/100;
	y=(bbox[3]-bbox[1])/100;
	for (var i=0;i<100;i++)
	{
		
		lon+=x;
		for (var j=0;j<100;j++)
		{
			var ring = [
			  [lon, lat], [lon+x, lat],
			  [lon+x, lat+y], [lon, lat+y]
			];
			lat+=y;
			var polygon = new ol.geom.Polygon([ring]);
			polygon.transform('EPSG:4326', 'EPSG:3857');
			var feature = new ol.Feature(polygon);
			vectorSource.addFeature(feature);
		}
		lat-=y*100;
	}
		
	
    </script>
  </body>
</html>